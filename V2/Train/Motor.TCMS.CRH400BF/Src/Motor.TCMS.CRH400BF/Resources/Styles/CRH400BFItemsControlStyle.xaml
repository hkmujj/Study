<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:cartPart="clr-namespace:Motor.TCMS.CRH400BF.Model.Train.CartPart"
    xmlns:constant="clr-namespace:Motor.TCMS.CRH400BF.Model.Constant"
    xmlns:converter="clr-namespace:MMI.Facility.WPFInfrastructure.Converter;assembly=MMI.Facility.WPFInfrastructure"
    xmlns:interface="clr-namespace:Motor.TCMS.CRH400BF.Model.Interface"
    xmlns:train="clr-namespace:Motor.TCMS.CRH400BF.Model.Train"
    xmlns:view="clr-namespace:MMI.Facility.WPFInfrastructure.View;assembly=MMI.Facility.WPFInfrastructure">


    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="../Base/CRH400BFBaseResource.xaml" />
        <ResourceDictionary Source="../Converter/CRH400BFConverterResource.xaml" />
        <ResourceDictionary Source="../Image/CRH400BFImageResource.xaml" />
    </ResourceDictionary.MergedDictionaries>


    <Style x:Key="ItemNetAStyle" TargetType="ItemsControl">
        <Style.Setters>
            <Setter Property="RenderTransformOrigin" Value="0.5,0.5" />
            <Setter Property="HorizontalAlignment" Value="Stretch" />
            <Setter Property="VerticalAlignment" Value="Stretch" />
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <ScaleTransform ScaleY="-1" />
                </Setter.Value>
            </Setter>
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <Grid />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate DataType="interface:ITargitDistanceScaleItem">
                        <Grid Width="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=ItemsControl}, Path=ActualWidth}" Height="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=ItemsControl}, Path=ActualHeight}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="1*" />
                                <ColumnDefinition Width="8*" />
                                <ColumnDefinition Width="10*" />
                            </Grid.ColumnDefinitions>
                            <Border
                                Grid.Column="0"
                                BorderBrush="{StaticResource ForegroundWhiteBrush}"
                                BorderThickness="0,0,1,0" />
                            <Canvas x:Name="ItemCanvas" Grid.Column="1">
                                <Line
                                    Stroke="{StaticResource ForegroundWhiteBrush}"
                                    StrokeThickness="{Binding Path=DegreeLength, Converter={StaticResource TargetDistanceScalLengthToLineTicknessConverter}}"
                                    X2="0"
                                    Y2="{Binding RelativeSource={RelativeSource Self}, Path=Y1}">
                                    <Line.X1>
                                        <MultiBinding Converter="{StaticResource TargetDistanceScalLenghToStartXConverter}">
                                            <Binding />
                                            <Binding ElementName="ItemCanvas" Path="ActualWidth" />
                                        </MultiBinding>
                                    </Line.X1>
                                    <Line.Y1>
                                        <MultiBinding Converter="{StaticResource ValueMultiplicativeConverter}">
                                            <Binding Path="DegreeLocation" />
                                            <Binding ElementName="ItemCanvas" Path="ActualHeight" />
                                        </MultiBinding>
                                    </Line.Y1>
                                </Line>
                            </Canvas>
                            <Canvas Grid.Column="2" Margin="0,0,2,0">
                                <TextBlock
                                    Width="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Canvas}, Path=ActualWidth}"
                                    FontSize="14"
                                    Foreground="White"
                                    RenderTransformOrigin="0.5,0.25"
                                    Text="{Binding Text}"
                                    TextAlignment="Center">
                                    <TextBlock.RenderTransform>
                                        <ScaleTransform ScaleY="-1" />
                                    </TextBlock.RenderTransform>
                                    <Canvas.Top>
                                        <MultiBinding Converter="{StaticResource ValueMultiplicativeConverter}">
                                            <Binding Path="DegreeLocation" />
                                            <Binding ElementName="ItemCanvas" Path="ActualHeight" />
                                        </MultiBinding>
                                    </Canvas.Top>
                                </TextBlock>
                            </Canvas>
                        </Grid>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>


    <Style x:Key="ItemNetVStyle" TargetType="ItemsControl">
        <Style.Setters>
            <Setter Property="RenderTransformOrigin" Value="0.5,0.5" />
            <Setter Property="HorizontalAlignment" Value="Stretch" />
            <Setter Property="VerticalAlignment" Value="Stretch" />
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <ScaleTransform ScaleY="-1" />
                </Setter.Value>
            </Setter>
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <Grid />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate DataType="interface:ITargitDistanceScaleItem">
                        <Grid Width="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=ItemsControl}, Path=ActualWidth}" Height="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=ItemsControl}, Path=ActualHeight}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="10*" />
                                <ColumnDefinition Width="8*" />
                                <ColumnDefinition Width="1*" />
                            </Grid.ColumnDefinitions>
                            <Canvas Grid.Column="0" Margin="2,0,0,0">
                                <TextBlock
                                    Width="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Canvas}, Path=ActualWidth}"
                                    FontSize="14"
                                    Foreground="White"
                                    RenderTransformOrigin="0.5,0.25"
                                    Text="{Binding Text}"
                                    TextAlignment="Center">
                                    <TextBlock.RenderTransform>
                                        <ScaleTransform ScaleY="-1" />
                                    </TextBlock.RenderTransform>
                                    <Canvas.Top>
                                        <MultiBinding Converter="{StaticResource ValueMultiplicativeConverter}">
                                            <Binding Path="DegreeLocation" />
                                            <Binding ElementName="ItemCanvas" Path="ActualHeight" />
                                        </MultiBinding>
                                    </Canvas.Top>
                                </TextBlock>
                            </Canvas>
                            <Canvas x:Name="ItemCanvas" Grid.Column="1">

                                <Line
                                    Stroke="{StaticResource ForegroundWhiteBrush}"
                                    StrokeThickness="{Binding Path=DegreeLength, Converter={StaticResource TargetDistanceScalLengthToLineTicknessConverter}}"
                                    X2="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Canvas}, Path=ActualWidth}"
                                    Y2="{Binding RelativeSource={RelativeSource Self}, Path=Y1}">
                                    <Line.X1>
                                        <MultiBinding Converter="{StaticResource TargetDistanceScalLenghToStartX2Converter}">
                                            <Binding />
                                            <Binding ElementName="ItemCanvas" Path="ActualWidth" />
                                        </MultiBinding>
                                    </Line.X1>
                                    <Line.Y1>
                                        <MultiBinding Converter="{StaticResource ValueMultiplicativeConverter}">
                                            <Binding Path="DegreeLocation" />
                                            <Binding ElementName="ItemCanvas" Path="ActualHeight" />
                                        </MultiBinding>
                                    </Line.Y1>
                                </Line>
                            </Canvas>
                            <Border
                                Grid.Column="2"
                                BorderBrush="{StaticResource ForegroundWhiteBrush}"
                                BorderThickness="1,0,0,0" />
                        </Grid>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>


    <Style x:Key="ItemWindPipeStyle" TargetType="ItemsControl">
        <Style.Setters>
            <Setter Property="RenderTransformOrigin" Value="0.5,0.5" />
            <Setter Property="HorizontalAlignment" Value="Stretch" />
            <Setter Property="VerticalAlignment" Value="Stretch" />
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <ScaleTransform ScaleY="-1" />
                </Setter.Value>
            </Setter>
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <Grid />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate DataType="interface:ITargitDistanceScaleItem">
                        <Grid Width="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=ItemsControl}, Path=ActualWidth}" Height="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=ItemsControl}, Path=ActualHeight}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="1*" />
                                <ColumnDefinition Width="8*" />
                                <ColumnDefinition Width="10*" />
                            </Grid.ColumnDefinitions>
                            <Border
                                Grid.Column="0"
                                BorderBrush="{StaticResource ForegroundWhiteBrush}"
                                BorderThickness="0,0,1,0" />
                            <Canvas x:Name="ItemCanvas" Grid.Column="1">
                                <Line
                                    Stroke="{StaticResource ForegroundWhiteBrush}"
                                    StrokeThickness="{Binding Path=DegreeLength, Converter={StaticResource TargetDistanceScalLengthToLineTicknessConverter}}"
                                    X2="0"
                                    Y2="{Binding RelativeSource={RelativeSource Self}, Path=Y1}">
                                    <Line.X1>
                                        <MultiBinding Converter="{StaticResource TargetDistanceScalLenghToStartXConverter}">
                                            <Binding />
                                            <Binding ElementName="ItemCanvas" Path="ActualWidth" />
                                        </MultiBinding>
                                    </Line.X1>
                                    <Line.Y1>
                                        <MultiBinding Converter="{StaticResource ValueMultiplicativeConverter}">
                                            <Binding Path="DegreeLocation" />
                                            <Binding ElementName="ItemCanvas" Path="ActualHeight" />
                                        </MultiBinding>
                                    </Line.Y1>
                                </Line>
                            </Canvas>
                            <Canvas Grid.Column="2" Margin="0,0,2,0">
                                <TextBlock
                                    Width="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Canvas}, Path=ActualWidth}"
                                    FontSize="14"
                                    Foreground="White"
                                    RenderTransformOrigin="0.5,0.25"
                                    Text="{Binding Text}"
                                    TextAlignment="Center">
                                    <TextBlock.RenderTransform>
                                        <ScaleTransform ScaleY="-1" />
                                    </TextBlock.RenderTransform>
                                    <Canvas.Top>
                                        <MultiBinding Converter="{StaticResource ValueMultiplicativeConverter}">
                                            <Binding Path="DegreeLocation" />
                                            <Binding ElementName="ItemCanvas" Path="ActualHeight" />
                                        </MultiBinding>
                                    </Canvas.Top>
                                </TextBlock>
                            </Canvas>
                        </Grid>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>


    <Style x:Key="ItemTowStyle" TargetType="ItemsControl">
        <Style.Setters>
            <Setter Property="RenderTransformOrigin" Value="0.5,0.5" />
            <Setter Property="HorizontalAlignment" Value="Stretch" />
            <Setter Property="VerticalAlignment" Value="Stretch" />
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <ScaleTransform ScaleY="-1" />
                </Setter.Value>
            </Setter>
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <Grid />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate DataType="interface:ITargitDistanceScaleItem">
                        <Grid Width="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=ItemsControl}, Path=ActualWidth}" Height="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=ItemsControl}, Path=ActualHeight}">

                            <Canvas x:Name="ItemCanvas">
                                <Line
                                    Stroke="{StaticResource ForegroundWhiteBrush}"
                                    StrokeThickness="{Binding Path=DegreeLength, Converter={StaticResource TargetDistanceScalLengthToLineTicknessConverter}}"
                                    X2="0"
                                    Y2="{Binding RelativeSource={RelativeSource Self}, Path=Y1}">
                                    <Line.X1>
                                        <MultiBinding Converter="{StaticResource TargetDistanceScalLenghToStartXConverter}">
                                            <Binding />
                                            <Binding ElementName="ItemCanvas" Path="ActualWidth" />
                                        </MultiBinding>
                                    </Line.X1>
                                    <Line.Y1>
                                        <MultiBinding Converter="{StaticResource ValueMultiplicativeConverter}">
                                            <Binding Path="DegreeLocation" />
                                            <Binding ElementName="ItemCanvas" Path="ActualHeight" />
                                        </MultiBinding>
                                    </Line.Y1>
                                </Line>
                            </Canvas>
                        </Grid>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>

    <Style x:Key="CarNameItemStyle" TargetType="ItemsControl">
        <Style.Setters>

            <Setter Property="Margin" Value="0,0,-6,0" />

            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate DataType="train:Car">
                        <Grid>
                            <Grid.Width>
                                <MultiBinding Converter="{StaticResource MathConverter}" ConverterParameter="x/8">
                                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource AncestorType=ItemsControl, Mode=FindAncestor}" />
                                </MultiBinding>
                            </Grid.Width>
                            <TextBlock
                                Margin="15,0"
                                VerticalAlignment="Center"
                                FontFamily="{StaticResource FontFamilySongTypeface}"
                                FontSize="16"
                                FontWeight="Bold"
                                Foreground="White"
                                Text="{Binding Path=Name}" />
                        </Grid>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>

    <Style x:Key="EleBrakeItemStyle" TargetType="ItemsControl">
        <Style.Setters>
            <Setter Property="Margin" Value="0,0,-6,0" />
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate DataType="train:Car">
                        <Image Source="{Binding BrakePage.Value.EleBrake.State.EleBrakeState, Converter={StaticResource EleBrakeStateToImageConverter}}" Visibility="{Binding Path=BrakePage.Value.EleBrake.Visible, Converter={StaticResource BoolVisibilityConverter}}">
                            <Image.Width>
                                <MultiBinding Converter="{StaticResource MathConverter}" ConverterParameter="x/8">
                                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource AncestorType=ItemsControl, Mode=FindAncestor}" />
                                </MultiBinding>
                            </Image.Width>
                        </Image>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>

    <Style x:Key="EleBrakeEffectItemStyle" TargetType="ItemsControl">
        <Style.Setters>
            <Setter Property="Margin" Value="0,0,-4,0" />
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate DataType="train:Car">
                        <Grid Visibility="{Binding Path=BrakePage.Value.EleBrake.Visible, Converter={StaticResource BoolVisibilityConverter}}">
                            <Grid.Width>
                                <MultiBinding Converter="{StaticResource MathConverter}" ConverterParameter="x/8">
                                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource AncestorType=ItemsControl, Mode=FindAncestor}" />
                                </MultiBinding>
                            </Grid.Width>
                            <Border
                                Margin="8,5,8,5"
                                Background="{Binding BrakePage.Value.EleBrake.State.EleBrakeEffectState, Converter={StaticResource EleBrakeEffectStateToImageConverter}}"
                                BorderBrush="White"
                                BorderThickness="1,1,1,1"
                                Visibility="{Binding Path=BrakePage.Value.EleBrake.State.EleBrakeEffectState, Converter={StaticResource EleBrakeEffectStateToVisibilityConverter}}" />

                        </Grid>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>


    <Style x:Key="AirBrakeItemStyle" TargetType="ItemsControl">
        <Style.Setters>
            <Setter Property="Margin" Value="0,0,-6,0" />
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate DataType="train:Car">
                        <Image Source="{Binding BrakePage.Value.AirBrake.State.AirBrakeState, Converter={StaticResource AirBrakeStateToImageConverter}}" Visibility="{Binding Path=BrakePage.Value.AirBrake.Visible, Converter={StaticResource BoolVisibilityConverter}}">
                            <Image.Width>
                                <MultiBinding Converter="{StaticResource MathConverter}" ConverterParameter="x/8">
                                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource AncestorType=ItemsControl, Mode=FindAncestor}" />
                                </MultiBinding>
                            </Image.Width>
                        </Image>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>

    <Style x:Key="AirBrakeEffectItemStyle" TargetType="ItemsControl">
        <Style.Setters>
            <Setter Property="Margin" Value="0,0,-4,0" />
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate DataType="train:Car">
                        <Grid Visibility="{Binding Path=BrakePage.Value.AirBrake.Visible, Converter={StaticResource BoolVisibilityConverter}}">
                            <Grid.Width>
                                <MultiBinding Converter="{StaticResource MathConverter}" ConverterParameter="x/8">
                                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource AncestorType=ItemsControl, Mode=FindAncestor}" />
                                </MultiBinding>
                            </Grid.Width>
                            <Border
                                Margin="8,5,8,5"
                                Background="{Binding BrakePage.Value.AirBrake.State.AirBrakeEffectState, Converter={StaticResource AirBrakeEffectStateToImageConverter}}"
                                BorderBrush="White"
                                BorderThickness="1,1,1,1"
                                Visibility="{Binding Path=BrakePage.Value.AirBrake.State.AirBrakeEffectState, Converter={StaticResource AirBrakeEffectStateToVisibilityConverter}}" />
                        </Grid>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>

    <Style x:Key="ParkBrakeItemStyle" TargetType="ItemsControl">
        <Style.Setters>
            <Setter Property="Margin" Value="0,0,-6,0" />
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate DataType="train:Car">
                        <Image Source="{Binding BrakePage.Value.ParkBrake.State.ParkBrakeState, Converter={StaticResource ParkBrakeStateToImageConverter}}" Visibility="{Binding Path=BrakePage.Value.ParkBrake.Visible, Converter={StaticResource BoolVisibilityConverter}}">
                            <Image.Width>
                                <MultiBinding Converter="{StaticResource MathConverter}" ConverterParameter="x/8">
                                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource AncestorType=ItemsControl, Mode=FindAncestor}" />
                                </MultiBinding>
                            </Image.Width>
                        </Image>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>

    <Style x:Key="ParkBrakeEffectItemStyle" TargetType="ItemsControl">
        <Style.Setters>
            <Setter Property="Margin" Value="0,0,-4,0" />
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate DataType="train:Car">
                        <Grid Visibility="{Binding Path=BrakePage.Value.ParkBrake.Visible, Converter={StaticResource BoolVisibilityConverter}}">
                            <Grid.Width>
                                <MultiBinding Converter="{StaticResource MathConverter}" ConverterParameter="x/8">
                                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource AncestorType=ItemsControl, Mode=FindAncestor}" />
                                </MultiBinding>
                            </Grid.Width>
                            <Border
                                Margin="8,5,8,5"
                                Background="{Binding BrakePage.Value.ParkBrake.State.ParkBrakeEffectState, Converter={StaticResource ParkBrakeEffectStateToImageConverter}}"
                                BorderBrush="White"
                                BorderThickness="1,1,1,1"
                                Visibility="{Binding Path=BrakePage.Value.ParkBrake.State.ParkBrakeEffectState, Converter={StaticResource ParkBrakeEffectStateToVisibilityConverter}}" />
                        </Grid>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>

    <Style x:Key="WindPipePressItemStyle" TargetType="ItemsControl">
        <Style.Setters>
            <Setter Property="Margin" Value="0,0,0,0" />
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate DataType="train:Car">
                        <TextBlock
                            VerticalAlignment="Center"
                            Foreground="Yellow"
                            Text="{Binding Path=BrakeInfoPage.Value.WindPipePress.State, StringFormat={}{0:F1}}"
                            TextAlignment="Center"
                            Visibility="{Binding Path=BrakeInfoPage.Value.WindPipePress.Visible, Converter={StaticResource BoolVisibilityConverter}}">
                            <TextBlock.Width>
                                <MultiBinding Converter="{StaticResource MathConverter}" ConverterParameter="x/8">
                                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource AncestorType=ItemsControl, Mode=FindAncestor}" />
                                </MultiBinding>
                            </TextBlock.Width>
                        </TextBlock>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>

    <Style x:Key="EmptySpring1PressItemStyle" TargetType="ItemsControl">
        <Style.Setters>
            <Setter Property="Margin" Value="0,0,0,0" />
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate DataType="train:Car">
                        <TextBlock
                            VerticalAlignment="Center"
                            Foreground="Yellow"
                            Text="{Binding Path=BrakeInfoPage.Value.EmptySpring1Press.State, StringFormat={}{0:F1}}"
                            TextAlignment="Center"
                            Visibility="{Binding Path=BrakeInfoPage.Value.EmptySpring1Press.Visible, Converter={StaticResource BoolVisibilityConverter}}">
                            <TextBlock.Width>
                                <MultiBinding Converter="{StaticResource MathConverter}" ConverterParameter="x/8">
                                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource AncestorType=ItemsControl, Mode=FindAncestor}" />
                                </MultiBinding>
                            </TextBlock.Width>
                        </TextBlock>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>

    <Style x:Key="BrakeCylinderPressItemStyle" TargetType="ItemsControl">
        <Style.Setters>
            <Setter Property="Margin" Value="0,0,0,0" />
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate DataType="train:Car">
                        <TextBlock
                            VerticalAlignment="Center"
                            Foreground="Yellow"
                            Text="{Binding Path=BrakeInfoPage.Value.BrakeCylinderPress.State, StringFormat={}{0:F1}}"
                            TextAlignment="Center"
                            Visibility="{Binding Path=BrakeInfoPage.Value.BrakeCylinderPress.Visible, Converter={StaticResource BoolVisibilityConverter}}">
                            <TextBlock.Width>
                                <MultiBinding Converter="{StaticResource MathConverter}" ConverterParameter="x/8">
                                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource AncestorType=ItemsControl, Mode=FindAncestor}" />
                                </MultiBinding>
                            </TextBlock.Width>
                        </TextBlock>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>

    <Style x:Key="EmptySpring2PressItemStyle" TargetType="ItemsControl">
        <Style.Setters>
            <Setter Property="Margin" Value="0,0,0,0" />
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate DataType="train:Car">
                        <TextBlock
                            VerticalAlignment="Center"
                            Foreground="Yellow"
                            Text="{Binding Path=BrakeInfoPage.Value.EmptySpring2Press.State, StringFormat={}{0:F1}}"
                            TextAlignment="Center"
                            Visibility="{Binding Path=BrakeInfoPage.Value.EmptySpring2Press.Visible, Converter={StaticResource BoolVisibilityConverter}}">
                            <TextBlock.Width>
                                <MultiBinding Converter="{StaticResource MathConverter}" ConverterParameter="x/8">
                                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource AncestorType=ItemsControl, Mode=FindAncestor}" />
                                </MultiBinding>
                            </TextBlock.Width>
                        </TextBlock>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>

    <Style x:Key="ParkingCylinderPressItemStyle" TargetType="ItemsControl">
        <Style.Setters>
            <Setter Property="Margin" Value="0,0,0,0" />
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate DataType="train:Car">
                        <TextBlock
                            VerticalAlignment="Center"
                            Foreground="Yellow"
                            Text="{Binding Path=BrakeInfoPage.Value.ParkingCylinderPress.State, StringFormat={}{0:F1}}"
                            TextAlignment="Center"
                            Visibility="{Binding Path=BrakeInfoPage.Value.ParkingCylinderPress.Visible, Converter={StaticResource BoolVisibilityConverter}}">
                            <TextBlock.Width>
                                <MultiBinding Converter="{StaticResource MathConverter}" ConverterParameter="x/8">
                                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource AncestorType=ItemsControl, Mode=FindAncestor}" />
                                </MultiBinding>
                            </TextBlock.Width>
                        </TextBlock>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>

    <Style x:Key="Bcu1StateItemStyle" TargetType="ItemsControl">
        <Style.Setters>
            <Setter Property="Margin" Value="0,0,0,0" />
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate DataType="train:Car">
                        <Grid Visibility="{Binding Path=BrakeInfoPage.Value.Bcu1State.Visible, Converter={StaticResource BoolVisibilityConverter}}">
                            <Grid.Resources>
                                <converter:SelectObjectContentConverter x:Key="BrakeInfoCommonStateToImageConverter">
                                    <converter:SelectObjectContentConverter.ObjectContentCollection>
                                        <converter:ObjectContentPair Key="{x:Static constant:BrakeInfoCommonState.Run}">
                                            <converter:ObjectContentPair.Content>
                                                <Ellipse
                                                    Width="{Binding RelativeSource={RelativeSource Self}, Path=ActualHeight}"
                                                    Margin="6"
                                                    Fill="LawnGreen " />
                                            </converter:ObjectContentPair.Content>
                                        </converter:ObjectContentPair>
                                        <converter:ObjectContentPair Key="{x:Static constant:BrakeInfoCommonState.NotRun}">
                                            <converter:ObjectContentPair.Content>
                                                <Ellipse
                                                    Width="{Binding RelativeSource={RelativeSource Self}, Path=ActualHeight}"
                                                    Margin="6"
                                                    Fill="White " />
                                            </converter:ObjectContentPair.Content>
                                        </converter:ObjectContentPair>
                                        <converter:ObjectContentPair Key="{x:Static constant:BrakeInfoCommonState.Unusual}">
                                            <converter:ObjectContentPair.Content>
                                                <Ellipse
                                                    Width="{Binding RelativeSource={RelativeSource Self}, Path=ActualHeight}"
                                                    Margin="6"
                                                    Fill="Red" />
                                            </converter:ObjectContentPair.Content>
                                        </converter:ObjectContentPair>
                                        <converter:ObjectContentPair Key="{x:Static constant:BrakeInfoCommonState.Unkown}">
                                            <converter:ObjectContentPair.Content>
                                                <TextBlock
                                                    VerticalAlignment="Center"
                                                    FontSize="14"
                                                    Foreground="Yellow"
                                                    Text="?"
                                                    TextAlignment="Center" />
                                            </converter:ObjectContentPair.Content>
                                        </converter:ObjectContentPair>
                                        <converter:ObjectContentPair Key="{x:Static constant:BrakeInfoCommonState.UnEffect}">
                                            <converter:ObjectContentPair.Content>
                                                <TextBlock
                                                    VerticalAlignment="Center"
                                                    FontSize="14"
                                                    Foreground="Yellow"
                                                    Text="---"
                                                    TextAlignment="Center" />
                                            </converter:ObjectContentPair.Content>
                                        </converter:ObjectContentPair>
                                    </converter:SelectObjectContentConverter.ObjectContentCollection>
                                </converter:SelectObjectContentConverter>
                            </Grid.Resources>
                            <Grid.Width>
                                <MultiBinding Converter="{StaticResource MathConverter}" ConverterParameter="x/8">
                                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource AncestorType=ItemsControl, Mode=FindAncestor}" />
                                </MultiBinding>
                            </Grid.Width>
                            <ContentControl Content="{Binding BrakeInfoPage.Value.Bcu1State.State, Converter={StaticResource BrakeInfoCommonStateToImageConverter}}" />

                        </Grid>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>

    <Style x:Key="Bcu2StateItemStyle" TargetType="ItemsControl">
        <Style.Setters>
            <Setter Property="Margin" Value="0,0,0,0" />
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate DataType="train:Car">
                        <Grid Visibility="{Binding Path=BrakeInfoPage.Value.Bcu2State.Visible, Converter={StaticResource BoolVisibilityConverter}}">
                            <Grid.Resources>
                                <converter:SelectObjectContentConverter x:Key="BrakeInfoCommonStateToImageConverter">
                                    <converter:SelectObjectContentConverter.ObjectContentCollection>
                                        <converter:ObjectContentPair Key="{x:Static constant:BrakeInfoCommonState.Run}">
                                            <converter:ObjectContentPair.Content>
                                                <Ellipse
                                                    Width="{Binding RelativeSource={RelativeSource Self}, Path=ActualHeight}"
                                                    Margin="6"
                                                    Fill="LawnGreen " />
                                            </converter:ObjectContentPair.Content>
                                        </converter:ObjectContentPair>
                                        <converter:ObjectContentPair Key="{x:Static constant:BrakeInfoCommonState.NotRun}">
                                            <converter:ObjectContentPair.Content>
                                                <Ellipse
                                                    Width="{Binding RelativeSource={RelativeSource Self}, Path=ActualHeight}"
                                                    Margin="6"
                                                    Fill="White " />
                                            </converter:ObjectContentPair.Content>
                                        </converter:ObjectContentPair>
                                        <converter:ObjectContentPair Key="{x:Static constant:BrakeInfoCommonState.Unusual}">
                                            <converter:ObjectContentPair.Content>
                                                <Ellipse
                                                    Width="{Binding RelativeSource={RelativeSource Self}, Path=ActualHeight}"
                                                    Margin="6"
                                                    Fill="Red" />
                                            </converter:ObjectContentPair.Content>
                                        </converter:ObjectContentPair>
                                        <converter:ObjectContentPair Key="{x:Static constant:BrakeInfoCommonState.Unkown}">
                                            <converter:ObjectContentPair.Content>
                                                <TextBlock
                                                    VerticalAlignment="Center"
                                                    FontSize="14"
                                                    Foreground="Yellow"
                                                    Text="?"
                                                    TextAlignment="Center" />
                                            </converter:ObjectContentPair.Content>
                                        </converter:ObjectContentPair>

                                        <converter:ObjectContentPair Key="{x:Static constant:BrakeInfoCommonState.UnEffect}">
                                            <converter:ObjectContentPair.Content>
                                                <TextBlock
                                                    VerticalAlignment="Center"
                                                    FontSize="14"
                                                    Foreground="Yellow"
                                                    Text="---"
                                                    TextAlignment="Center" />
                                            </converter:ObjectContentPair.Content>
                                        </converter:ObjectContentPair>
                                    </converter:SelectObjectContentConverter.ObjectContentCollection>
                                </converter:SelectObjectContentConverter>
                            </Grid.Resources>
                            <Grid.Width>
                                <MultiBinding Converter="{StaticResource MathConverter}" ConverterParameter="x/8">
                                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource AncestorType=ItemsControl, Mode=FindAncestor}" />
                                </MultiBinding>
                            </Grid.Width>
                            <ContentControl Content="{Binding BrakeInfoPage.Value.Bcu2State.State, Converter={StaticResource BrakeInfoCommonStateToImageConverter}}" />
                        </Grid>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>

    <Style x:Key="KeepBrakeStateItemStyle" TargetType="ItemsControl">
        <Style.Setters>
            <Setter Property="Margin" Value="0,0,0,0" />
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate DataType="train:Car">
                        <Grid Visibility="{Binding Path=BrakeInfoPage.Value.KeepBrakeState.Visible, Converter={StaticResource BoolVisibilityConverter}}">
                            <Grid.Resources>
                                <converter:SelectObjectContentConverter x:Key="BrakeInfoCommonStateToImageConverter">
                                    <converter:SelectObjectContentConverter.ObjectContentCollection>
                                        <converter:ObjectContentPair Key="{x:Static constant:BrakeInfoCommonState.Run}">
                                            <converter:ObjectContentPair.Content>
                                                <Ellipse
                                                    Width="{Binding RelativeSource={RelativeSource Self}, Path=ActualHeight}"
                                                    Margin="6"
                                                    Fill="LawnGreen " />
                                            </converter:ObjectContentPair.Content>
                                        </converter:ObjectContentPair>
                                        <converter:ObjectContentPair Key="{x:Static constant:BrakeInfoCommonState.NotRun}">
                                            <converter:ObjectContentPair.Content>
                                                <Ellipse
                                                    Width="{Binding RelativeSource={RelativeSource Self}, Path=ActualHeight}"
                                                    Margin="6"
                                                    Fill="White " />
                                            </converter:ObjectContentPair.Content>
                                        </converter:ObjectContentPair>
                                        <converter:ObjectContentPair Key="{x:Static constant:BrakeInfoCommonState.Unusual}">
                                            <converter:ObjectContentPair.Content>
                                                <Ellipse
                                                    Width="{Binding RelativeSource={RelativeSource Self}, Path=ActualHeight}"
                                                    Margin="6"
                                                    Fill="Red" />
                                            </converter:ObjectContentPair.Content>
                                        </converter:ObjectContentPair>
                                        <converter:ObjectContentPair Key="{x:Static constant:BrakeInfoCommonState.Unkown}">
                                            <converter:ObjectContentPair.Content>
                                                <TextBlock
                                                    VerticalAlignment="Center"
                                                    FontSize="14"
                                                    Foreground="Yellow"
                                                    Text="?"
                                                    TextAlignment="Center" />
                                            </converter:ObjectContentPair.Content>
                                        </converter:ObjectContentPair>

                                        <converter:ObjectContentPair Key="{x:Static constant:BrakeInfoCommonState.UnEffect}">
                                            <converter:ObjectContentPair.Content>
                                                <TextBlock
                                                    VerticalAlignment="Center"
                                                    FontSize="14"
                                                    Foreground="Yellow"
                                                    Text="---"
                                                    TextAlignment="Center" />
                                            </converter:ObjectContentPair.Content>
                                        </converter:ObjectContentPair>
                                    </converter:SelectObjectContentConverter.ObjectContentCollection>
                                </converter:SelectObjectContentConverter>
                            </Grid.Resources>
                            <Grid.Width>
                                <MultiBinding Converter="{StaticResource MathConverter}" ConverterParameter="x/8">
                                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource AncestorType=ItemsControl, Mode=FindAncestor}" />
                                </MultiBinding>
                            </Grid.Width>
                            <ContentControl Content="{Binding BrakeInfoPage.Value.KeepBrakeState.State, Converter={StaticResource BrakeInfoCommonStateToImageConverter}}" />
                        </Grid>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>

    <Style x:Key="PercentBrakeStateItemStyle" TargetType="ItemsControl">
        <Style.Setters>
            <Setter Property="Margin" Value="0,0,0,0" />
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate DataType="train:Car">
                        <Grid Visibility="{Binding Path=BrakeInfoPage.Value.PercentBrakeState.Visible, Converter={StaticResource BoolVisibilityConverter}}">
                            <Grid.Resources>
                                <converter:SelectObjectContentConverter x:Key="BrakeInfoCommonStateToImageConverter">
                                    <converter:SelectObjectContentConverter.ObjectContentCollection>
                                        <converter:ObjectContentPair Key="{x:Static constant:BrakeInfoCommonState.Run}">
                                            <converter:ObjectContentPair.Content>
                                                <Ellipse
                                                    Width="{Binding RelativeSource={RelativeSource Self}, Path=ActualHeight}"
                                                    Margin="6"
                                                    Fill="LawnGreen " />
                                            </converter:ObjectContentPair.Content>
                                        </converter:ObjectContentPair>
                                        <converter:ObjectContentPair Key="{x:Static constant:BrakeInfoCommonState.NotRun}">
                                            <converter:ObjectContentPair.Content>
                                                <Ellipse
                                                    Width="{Binding RelativeSource={RelativeSource Self}, Path=ActualHeight}"
                                                    Margin="6"
                                                    Fill="White " />
                                            </converter:ObjectContentPair.Content>
                                        </converter:ObjectContentPair>
                                        <converter:ObjectContentPair Key="{x:Static constant:BrakeInfoCommonState.Unusual}">
                                            <converter:ObjectContentPair.Content>
                                                <Ellipse
                                                    Width="{Binding RelativeSource={RelativeSource Self}, Path=ActualHeight}"
                                                    Margin="6"
                                                    Fill="Red" />
                                            </converter:ObjectContentPair.Content>
                                        </converter:ObjectContentPair>
                                        <converter:ObjectContentPair Key="{x:Static constant:BrakeInfoCommonState.Unkown}">
                                            <converter:ObjectContentPair.Content>
                                                <TextBlock
                                                    VerticalAlignment="Center"
                                                    FontSize="14"
                                                    Foreground="Yellow"
                                                    Text="?"
                                                    TextAlignment="Center" />
                                            </converter:ObjectContentPair.Content>
                                        </converter:ObjectContentPair>
                                        <converter:ObjectContentPair Key="{x:Static constant:BrakeInfoCommonState.UnEffect}">
                                            <converter:ObjectContentPair.Content>
                                                <TextBlock
                                                    VerticalAlignment="Center"
                                                    FontSize="14"
                                                    Foreground="Yellow"
                                                    Text="---"
                                                    TextAlignment="Center" />
                                            </converter:ObjectContentPair.Content>
                                        </converter:ObjectContentPair>

                                    </converter:SelectObjectContentConverter.ObjectContentCollection>
                                </converter:SelectObjectContentConverter>
                            </Grid.Resources>
                            <Grid.Width>
                                <MultiBinding Converter="{StaticResource MathConverter}" ConverterParameter="x/8">
                                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource AncestorType=ItemsControl, Mode=FindAncestor}" />
                                </MultiBinding>
                            </Grid.Width>
                            <ContentControl Content="{Binding BrakeInfoPage.Value.PercentBrakeState.State, Converter={StaticResource BrakeInfoCommonStateToImageConverter}}" />
                        </Grid>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>

    <Style x:Key="AssistAirCompressorStateItemStyle" TargetType="ItemsControl">
        <Style.Setters>
            <Setter Property="Margin" Value="0,0,0,0" />
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate DataType="train:Car">
                        <Grid Visibility="{Binding Path=BrakeInfoPage.Value.AssistAirCompressorState.Visible, Converter={StaticResource BoolVisibilityConverter}}">
                            <Grid.Resources>
                                <converter:SelectObjectContentConverter x:Key="BrakeInfoCommonStateToImageConverter">
                                    <converter:SelectObjectContentConverter.ObjectContentCollection>
                                        <converter:ObjectContentPair Key="{x:Static constant:BrakeInfoCommonState.Run}">
                                            <converter:ObjectContentPair.Content>
                                                <Ellipse
                                                    Width="{Binding RelativeSource={RelativeSource Self}, Path=ActualHeight}"
                                                    Margin="6"
                                                    Fill="LawnGreen " />
                                            </converter:ObjectContentPair.Content>
                                        </converter:ObjectContentPair>
                                        <converter:ObjectContentPair Key="{x:Static constant:BrakeInfoCommonState.NotRun}">
                                            <converter:ObjectContentPair.Content>
                                                <Ellipse
                                                    Width="{Binding RelativeSource={RelativeSource Self}, Path=ActualHeight}"
                                                    Margin="6"
                                                    Fill="White " />
                                            </converter:ObjectContentPair.Content>
                                        </converter:ObjectContentPair>
                                        <converter:ObjectContentPair Key="{x:Static constant:BrakeInfoCommonState.Unusual}">
                                            <converter:ObjectContentPair.Content>
                                                <Ellipse
                                                    Width="{Binding RelativeSource={RelativeSource Self}, Path=ActualHeight}"
                                                    Margin="6"
                                                    Fill="Red" />
                                            </converter:ObjectContentPair.Content>
                                        </converter:ObjectContentPair>
                                        <converter:ObjectContentPair Key="{x:Static constant:BrakeInfoCommonState.Unkown}">
                                            <converter:ObjectContentPair.Content>
                                                <TextBlock
                                                    VerticalAlignment="Center"
                                                    FontSize="14"
                                                    Foreground="Yellow"
                                                    Text="?"
                                                    TextAlignment="Center" />
                                            </converter:ObjectContentPair.Content>
                                        </converter:ObjectContentPair>
                                        <converter:ObjectContentPair Key="{x:Static constant:BrakeInfoCommonState.UnEffect}">
                                            <converter:ObjectContentPair.Content>
                                                <TextBlock
                                                    VerticalAlignment="Center"
                                                    FontSize="14"
                                                    Foreground="Yellow"
                                                    Text="---"
                                                    TextAlignment="Center" />
                                            </converter:ObjectContentPair.Content>
                                        </converter:ObjectContentPair>
                                    </converter:SelectObjectContentConverter.ObjectContentCollection>
                                </converter:SelectObjectContentConverter>
                            </Grid.Resources>
                            <Grid.Width>
                                <MultiBinding Converter="{StaticResource MathConverter}" ConverterParameter="x/8">
                                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource AncestorType=ItemsControl, Mode=FindAncestor}" />
                                </MultiBinding>
                            </Grid.Width>
                            <Border
                                Margin="-0.5,0,-0.5,0"
                                BorderBrush="White"
                                BorderThickness="1,0,1,1" />
                            <ContentControl Content="{Binding BrakeInfoPage.Value.AssistAirCompressorState.State, Converter={StaticResource BrakeInfoCommonStateToImageConverter}}" />
                        </Grid>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>

    <Style x:Key="DoorItemStyle" TargetType="ItemsControl">
        <Style.Setters>
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate DataType="cartPart:DoorStateItem">
                        <Image
                            Margin="2"
                            Source="{Binding Path=State, Converter={StaticResource DoorStateToImageConverter}}"
                            Stretch="Fill"
                            Visibility="{Binding Path=Visible, Converter={StaticResource BoolVisibilityConverter}}">
                            <Image.Width>
                                <MultiBinding Converter="{StaticResource MathConverter}" ConverterParameter="x/2">
                                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource AncestorType=ItemsControl, Mode=FindAncestor}" />
                                </MultiBinding>
                            </Image.Width>
                        </Image>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>

    <Style x:Key="CarBodyItemStyle" TargetType="ItemsControl">
        <Style.Setters>

            <Setter Property="Margin" Value="-5.4,0,-5.4,0" />

            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate DataType="train:Car">
                        <Grid
                            Margin="5.4,0,5.4,0"
                            view:GridLine.Brush="{StaticResource LineBrush}"
                            view:GridLine.Style="ShowAll">
                            <Grid.Width>
                                <MultiBinding Converter="{StaticResource MathConverter}" ConverterParameter="x/9">
                                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource AncestorType=ItemsControl, Mode=FindAncestor}" />
                                </MultiBinding>
                            </Grid.Width>
                            <Grid.RowDefinitions>
                                <RowDefinition />
                                <RowDefinition />
                                <RowDefinition />
                            </Grid.RowDefinitions>
                            <ItemsControl
                                Grid.Row="0"
                                ItemsSource="{Binding Path=Door.UpItems}"
                                Style="{StaticResource DoorItemStyle}" />

                            <Border
                                Grid.Row="1"
                                BorderBrush="White"
                                BorderThickness="2" />
                            <TextBlock
                                Grid.Row="1"
                                VerticalAlignment="Center"
                                FontFamily="{StaticResource FontFamilySongTypeface}"
                                FontSize="16"
                                FontWeight="Bold"
                                Foreground="White"
                                Text="{Binding Path=Name}"
                                TextAlignment="Center" />
                            <Grid Grid.Row="1">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition />
                                    <ColumnDefinition />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>
                                <Ellipse
                                    Height="{Binding RelativeSource={RelativeSource Self}, Path=ActualWidth}"
                                    Margin="5"
                                    Fill="Red"
                                    Visibility="{Binding Door.Surchage1, Converter={StaticResource BoolVisibilityConverter}}" />
                                <Ellipse
                                    Grid.Column="2"
                                    Height="{Binding RelativeSource={RelativeSource Self}, Path=ActualWidth}"
                                    Margin="5"
                                    Fill="Red"
                                    Stretch="Fill"
                                    Visibility="{Binding Door.Surchage2, Converter={StaticResource BoolVisibilityConverter}}" />
                            </Grid>
                            <ItemsControl
                                Grid.Row="2"
                                ItemsSource="{Binding Path=Door.DownItems}"
                                Style="{StaticResource DoorItemStyle}" />

                        </Grid>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>

    <Style x:Key="PantographItemStyle" TargetType="ItemsControl">
        <Style.Setters>
            <Setter Property="Margin" Value="0,0,-6,0" />
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate DataType="train:Car">
                        <Image Source="{Binding EquipmentCutOffPage.Value.PantographState.State, Converter={StaticResource PantographStateToImageConverter}}" Visibility="{Binding Path=EquipmentCutOffPage.Value.PantographState.Visible, Converter={StaticResource BoolVisibilityConverter}}">
                            <Image.Width>
                                <MultiBinding Converter="{StaticResource MathConverter}" ConverterParameter="x/8">
                                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource AncestorType=ItemsControl, Mode=FindAncestor}" />
                                </MultiBinding>
                            </Image.Width>
                        </Image>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>

    <Style x:Key="MainBreakerItemStyle" TargetType="ItemsControl">
        <Style.Setters>
            <Setter Property="Margin" Value="0,0,-6,0" />
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate DataType="train:Car">
                        <Image Source="{Binding EquipmentCutOffPage.Value.MainBreakerState.State, Converter={StaticResource MainBreakerStateToImageConverter}}" Visibility="{Binding Path=EquipmentCutOffPage.Value.MainBreakerState.Visible, Converter={StaticResource BoolVisibilityConverter}}">
                            <Image.Width>
                                <MultiBinding Converter="{StaticResource MathConverter}" ConverterParameter="x/8">
                                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource AncestorType=ItemsControl, Mode=FindAncestor}" />
                                </MultiBinding>
                            </Image.Width>
                        </Image>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>

    <Style x:Key="HighPressSwitchItemStyle" TargetType="ItemsControl">
        <Style.Setters>
            <Setter Property="Margin" Value="0,0,-6,0" />
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate DataType="train:Car">
                        <Image Source="{Binding EquipmentCutOffPage.Value.HighPressSwitchState.State, Converter={StaticResource HighPressSwitchStateToImageConverter}}" Visibility="{Binding Path=EquipmentCutOffPage.Value.HighPressSwitchState.Visible, Converter={StaticResource BoolVisibilityConverter}}">
                            <Image.Width>
                                <MultiBinding Converter="{StaticResource MathConverter}" ConverterParameter="x/8">
                                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource AncestorType=ItemsControl, Mode=FindAncestor}" />
                                </MultiBinding>
                            </Image.Width>
                        </Image>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>


    <Style x:Key="TractionConverterItemStyle" TargetType="ItemsControl">
        <Style.Setters>
            <Setter Property="Margin" Value="0,0,-6,0" />
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate DataType="train:Car">
                        <Image Source="{Binding EquipmentCutOffPage.Value.TractionConverterState.State, Converter={StaticResource TractionConverterStateToImageConverter}}" Visibility="{Binding Path=EquipmentCutOffPage.Value.TractionConverterState.Visible, Converter={StaticResource BoolVisibilityConverter}}">
                            <Image.Width>
                                <MultiBinding Converter="{StaticResource MathConverter}" ConverterParameter="x/8">
                                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource AncestorType=ItemsControl, Mode=FindAncestor}" />
                                </MultiBinding>
                            </Image.Width>
                        </Image>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>

    <Style x:Key="TractionInvertorItemStyle" TargetType="ItemsControl">
        <Style.Setters>
            <Setter Property="Margin" Value="0,0,-6,0" />
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate DataType="train:Car">
                        <Image Source="{Binding EquipmentCutOffPage.Value.TractionInvertorState.State, Converter={StaticResource TractionInvertorStateToImageConverter}}" Visibility="{Binding Path=EquipmentCutOffPage.Value.TractionInvertorState.Visible, Converter={StaticResource BoolVisibilityConverter}}">
                            <Image.Width>
                                <MultiBinding Converter="{StaticResource MathConverter}" ConverterParameter="x/8">
                                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource AncestorType=ItemsControl, Mode=FindAncestor}" />
                                </MultiBinding>
                            </Image.Width>
                        </Image>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>

    <Style x:Key="AssistConverterItemStyle" TargetType="ItemsControl">
        <Style.Setters>
            <Setter Property="Margin" Value="0,0,-6,0" />
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate DataType="train:Car">
                        <Image Source="{Binding EquipmentCutOffPage.Value.AssistConverterState.State, Converter={StaticResource AssistConverterStateToImageConverter}}" Visibility="{Binding Path=EquipmentCutOffPage.Value.AssistConverterState.Visible, Converter={StaticResource BoolVisibilityConverter}}">
                            <Image.Width>
                                <MultiBinding Converter="{StaticResource MathConverter}" ConverterParameter="x/8">
                                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource AncestorType=ItemsControl, Mode=FindAncestor}" />
                                </MultiBinding>
                            </Image.Width>
                        </Image>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>


    <Style x:Key="BatteryCharger1ItemStyle" TargetType="ItemsControl">
        <Style.Setters>
            <Setter Property="Margin" Value="0,0,-6,0" />
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate DataType="train:Car">
                        <Image Source="{Binding EquipmentCutOffPage.Value.BatteryChargerState1.State, Converter={StaticResource BatteryChargerStateToImageConverter}}" Visibility="{Binding Path=EquipmentCutOffPage.Value.BatteryChargerState1.Visible, Converter={StaticResource BoolVisibilityConverter}}">
                            <Image.Width>
                                <MultiBinding Converter="{StaticResource MathConverter}" ConverterParameter="x/8">
                                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource AncestorType=ItemsControl, Mode=FindAncestor}" />
                                </MultiBinding>
                            </Image.Width>
                        </Image>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>

    <Style x:Key="BatteryCharger2ItemStyle" TargetType="ItemsControl">
        <Style.Setters>
            <Setter Property="Margin" Value="0,0,-6,0" />
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate DataType="train:Car">
                        <Image Source="{Binding EquipmentCutOffPage.Value.BatteryChargerState2.State, Converter={StaticResource BatteryChargerStateToImageConverter}}" Visibility="{Binding Path=EquipmentCutOffPage.Value.BatteryChargerState2.Visible, Converter={StaticResource BoolVisibilityConverter}}">
                            <Image.Width>
                                <MultiBinding Converter="{StaticResource MathConverter}" ConverterParameter="x/8">
                                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource AncestorType=ItemsControl, Mode=FindAncestor}" />
                                </MultiBinding>
                            </Image.Width>
                        </Image>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>

    <Style x:Key="AirCompressorItemStyle" TargetType="ItemsControl">
        <Style.Setters>
            <Setter Property="Margin" Value="0,0,-6,0" />
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate DataType="train:Car">
                        <Image Source="{Binding EquipmentCutOffPage.Value.AirCompressorState.State, Converter={StaticResource AirCompressorStateToImageConverter}}" Visibility="{Binding Path=EquipmentCutOffPage.Value.AirCompressorState.Visible, Converter={StaticResource BoolVisibilityConverter}}">
                            <Image.Width>
                                <MultiBinding Converter="{StaticResource MathConverter}" ConverterParameter="x/8">
                                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource AncestorType=ItemsControl, Mode=FindAncestor}" />
                                </MultiBinding>
                            </Image.Width>
                        </Image>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>
</ResourceDictionary>